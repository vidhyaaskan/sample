<!DOCTYPE html>
<html>
  <head>
    <title>E-Sign</title>
     {{!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous"> --}}
         <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    {{!--<link rel='stylesheet' href='/stylesheets/style.css'/>--}}
      <link rel="stylesheet" href="/stylesheets/common.css" />
    <link rel="stylesheet" href="/stylesheets/loginform.css"/>
    <link rel="stylesheet" href="/stylesheets/dashboard.css"/>
    <link rel="stylesheet" href="/stylesheets/uikit.min.css"/>
    <link rel="stylesheet" href="/stylesheets/template.css"/>

    
  </head>
  <body>
    {{{body}}}
  </body>
</html>

<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
 <script src="/javascripts/jq3.js"></script>
     <script src="/javascripts/app.js"></script>
     <script src="/javascripts/template.js"></script>
     <script src="/javascripts//uikit.min.js"></script>
<script>

  tinymce.init({
    selector: '#lettertextarea'
  });



/*let templatename=$('.templatename').val();
let category= $('.category').val();
if(templatename =="" && category ==""){
  $('.sectionsin').prop("disabled", true); 
}*/

$('.templatename').change(function(){
  let val=$(this).val();
  $('.temphidden').val(val);
  });

function openFC(evt, tabName){
   let id = 'fcs'+tabName;
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(id).style.display = "block";
    evt.currentTarget.className += " active";
}

if(document.getElementById("defaultOpen") != null){
    document.getElementById("defaultOpen").click();
  }

function editsection(e,id,name,tempname,category){

  alert(id);
}

function ElemnetLoop(data){
  let html = '';
  $.each(data.tempsection, function(index, value){
    let id='';
  if(index == 0)
   id='defaultOpen';
   else
   id = 'defaultOpen'+index;

  html +=`<ul class='uk-list'><li id=${id} class='cc-section-list tablinks secclick' ><a class='cc-section-name' onclick='openFC(event,${index})'>${value.name}</a><span class='cc-section-edit'><div class='cc-sectionlist-option'>
    <i class='material-icons' onclick='editsection(event,"${value._id}","${value.name}","${value.templatename}","${value.category}")'>edit</i></span><span class='cc-section-delete'><i class='material-icons'>delete</i></span></div></li></ul>`;
   });

  $('.secList').html(html);
}

$('.sectionsin').on('keyup', function(e){
    if(e.keyCode === 13) {
    let category= $('.category').val();
    let templatename= $('.templatename').val();
    let section =$(this).val();
    let sec_id=$('.sec_id').val();
     $.ajax({
                url:'template/sections', 
                method:'POST',
                data: {category:category,templatename:templatename,section:section,sec_id:sec_id}, 
                success: function(data){ 
                  ElemnetLoop(data);
                }
            });
 
    }
});

  $('.SaveField').click(function(){
    let field_name = $('.field_name').val();
    let field_type = $('.field_type').val();
    let required_field = $('.required_field').val();
    let default_value = $('.default_value').val();
    let place_value = $('.place_value').val();

    
  });

/*$('.clonebtn').click(function(){
  let index=$(this).data('indexclone');
  $("#clonediv").clone().appendTo(".appendDiv");
});*/
</script>
    